<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>Tetris by And3k5!</title>
    <script src="js/tetris.js"></script>
</head>

<body>
    <canvas></canvas>
    <script>
        var canvas = document.querySelector("canvas");
        canvas.width = 200;
        canvas.height = 200;
        var ctx = canvas.getContext("2d");
        
        function render(ctx) {

            var w = ctx.canvas.width;
            var h = ctx.canvas.height;
            var image = ctx.createImageData(w,h);
            
            

            for (var _x = 0;_x<w;_x++) {
                for (var _y = 0;_y<w;_y++) {
                    var pos = (_x + ~~(_y * w)) * 4;

                    var col = exportMainImage(_x/w,_y/h);

                    image.data[pos+0] = col.x * 255;
                    image.data[pos+1] = col.y * 255;
                    image.data[pos+2] = col.z * 255;
                    image.data[pos+3] = 255;
                }
            }



            ctx.putImageData(image,0,0);
        }
        requestAnimationFrame((function () {
            var rend = function () {
                render(ctx);
                requestAnimationFrame(rend);
            }
            return rend;
        })());
        //render(ctx);
    </script>
</body>
</html>